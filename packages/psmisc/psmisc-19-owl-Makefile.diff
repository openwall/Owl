diff -ur psmisc-19.orig/Makefile psmisc-19/Makefile
--- psmisc-19.orig/Makefile	Mon Oct 25 22:01:33 1999
+++ psmisc-19/Makefile	Wed Dec 25 19:51:16 2002
@@ -1,14 +1,17 @@
-CC=cc
-CFLAGS=-O -DPSMISC_VERSION=\"`cat VERSION`\" \
-  -D_GNU_SOURCE \
-  -Wall -Wno-parentheses -Wwrite-strings -Wpointer-arith \
-  # -Wcast-align -Wconversion -g
-LDFLAGS=#-s -N #-Xlinker -qmagic
-REAL_CPP=cc -E
-PROGS=killall pstree fuser
-EBINDIR=/bin		# essential binaries
-BINDIR=/usr/bin		# not so essential ones
-MANDIR=/usr/man/man1	# all man pages
+CC = gcc
+ifndef CFLAGS
+CFLAGS = -O2 -fomit-frame-pointer
+endif
+CFLAGS += -DPSMISC_VERSION=\"`cat VERSION`\" \
+	-D_GNU_SOURCE \
+	-Wall -Wno-parentheses -Wwrite-strings -Wpointer-arith
+LDFLAGS = -s
+REAL_CPP = gcc -E
+
+PROGS = killall pstree fuser
+EBINDIR = /bin		# essential binaries
+BINDIR = /usr/bin	# not so essential ones
+MANDIR = /usr/man	# all man pages
 
 all:		$(PROGS)
 
@@ -34,22 +37,22 @@
 		$(CC) $(CFLAGS) $(LDFLAGS) -o pstree pstree.c -ltermcap
 
 install:	$(PROGS)
-#		EBINDIR is expected to exist, so we don't try to create it
-		install -o 0 -g 0 -m 555 fuser $(EBINDIR)
-		[ -d $(BINDIR) ] || install -d -o 0 -g 0 -m 755 $(BINDIR)
-		install -o 0 -g 0 -m 555 killall $(BINDIR)
-		install -o 0 -g 0 -m 555 pstree $(BINDIR)
-		[ -d $(MANDIR) ] || install -d -o 0 -g 0 -m 755 $(MANDIR)
-		install -o 0 -g 0 -m 444 fuser.1 $(MANDIR)
-		install -o 0 -g 0 -m 444 killall.1 $(MANDIR)
-		install -o 0 -g 0 -m 444 pstree.1 $(MANDIR)
+		mkdir -p -m 755 $(DESTDIR)$(EBINDIR)
+		install -m 755 fuser $(DESTDIR)$(EBINDIR)/
+		mkdir -p -m 755 $(DESTDIR)$(BINDIR)
+		install -m 755 killall $(DESTDIR)$(BINDIR)/
+		install -m 755 pstree $(DESTDIR)$(BINDIR)/
+		mkdir -p -m 755 $(DESTDIR)$(MANDIR)/man1
+		install -m 644 fuser.1 $(DESTDIR)$(MANDIR)/man1/
+		install -m 644 killall.1 $(DESTDIR)$(MANDIR)/man1/
+		install -m 644 pstree.1 $(DESTDIR)$(MANDIR)/man1/
 
 install-pidof:
-		@[ -x `echo $(BINDIR)`/killall ] || { \
-		  echo "Need `echo $(BINDIR)`/killall to install pidof"; \
+		@[ -x `echo $(DESTDIR)$(BINDIR)`/killall ] || { \
+		  echo "Need killall installed to install pidof"; \
 		  exit 1; }
-		ln -sf killall `echo $(BINDIR)`/pidof
-		install -o 0 -g 0 -m 444 pidof.1 $(MANDIR)
+		ln -sf killall $(DESTDIR)$(BINDIR)/pidof
+		install -m 644 pidof.1 $(DESTDIR)$(MANDIR)/man1/
 
 clean:
 		rm -f *.o signames.h
