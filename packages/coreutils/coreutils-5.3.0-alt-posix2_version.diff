diff -uprk.orig coreutils-200408100654.orig/lib/posixver.c coreutils-200408100654/lib/posixver.c
--- coreutils-200408100654.orig/lib/posixver.c	2004-01-15 09:35:41 +0300
+++ coreutils-200408100654/lib/posixver.c	2004-08-10 20:22:06 +0400
@@ -57,3 +57,15 @@ posix2_version (void)
 
   return v < INT_MIN ? INT_MIN : v < INT_MAX ? v : INT_MAX;
 }
+
+int
+posix2_version_lt_200112 (void)
+{
+	return posix2_version () < 200112 || !getenv ("POSIXLY_CORRECT");
+}
+
+int
+posix2_version_ge_200112 (void)
+{
+	return posix2_version () >= 200112 && getenv ("POSIXLY_CORRECT");
+}
diff -uprk.orig coreutils-200408100654.orig/lib/posixver.h coreutils-200408100654/lib/posixver.h
--- coreutils-200408100654.orig/lib/posixver.h	2002-02-16 11:13:18 +0300
+++ coreutils-200408100654/lib/posixver.h	2004-08-10 20:15:17 +0400
@@ -1 +1,3 @@
 int posix2_version (void);
+int posix2_version_lt_200112 (void);
+int posix2_version_ge_200112 (void);
--- coreutils-200409280634/tests/tail/Test.pm.orig	2004-09-24 00:30:54 +0400
+++ coreutils-200409280634/tests/tail/Test.pm	2004-09-30 01:36:31 +0400
@@ -86,6 +86,9 @@ sub test_vector
       $test_name =~ /^(obs|minus-)/
 	and $Test::env{$test_name} = ['_POSIX2_VERSION=199209'];
 
+      $test_name =~ /^err-6/
+	and $Test::env{$test_name} = ['POSIXLY_CORRECT=1'];
+
       # If you run the minus* tests with a FILE arg they'd hang.
       # If you run the err-1 or err-3 tests with a FILE, they'd misinterpret
       # the arg unless we are using the obsolete form.
