diff -ur xinetd-2.3.3.orig/xinetd/init.c xinetd-2.3.3/xinetd/init.c
--- xinetd-2.3.3.orig/xinetd/init.c	Thu Aug 16 04:17:03 2001
+++ xinetd-2.3.3/xinetd/init.c	Thu Aug 30 02:36:26 2001
@@ -258,18 +258,24 @@
          break ;
       else
       {
-            if ( pid_file_option ){
-                 unlink(pid_file_option);
-                 pidfd=open(pid_file_option,O_EXCL|O_CREAT|O_WRONLY, S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH);
-                 if(pidfd>=0){ /* successfully created file */
-                     pidfile=fdopen(pidfd,"w");
-                     fprintf(pidfile,"%i\n",pid);
-                     fchmod(pidfd,S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH);
-                     fclose(pidfile);
-                 }
-            }
-                    
-                                
+         if ( pid_file_option ) {
+            unlink(pid_file_option);
+            pidfd = open(pid_file_option, O_EXCL|O_CREAT|O_WRONLY,
+               S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH);
+            if (pidfd >= 0) { /* successfully created file */
+               pidfile=fdopen(pidfd,"w");
+               if (pidfile) {
+                  fchmod(pidfd, S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH);
+                  fprintf(pidfile, "%d\n", pid);
+                  fclose(pidfile);
+               } else {
+                  perror("fdopen");
+                  close(pidfd);
+               }
+            } else
+               perror("open");
+         }
+
 #ifndef DEBUG_DAEMON
          sleep( 3 ) ;   /* give some time to the daemon to initialize */
 #endif
@@ -389,6 +395,9 @@
       if ( ps.rws.available_services == 0 )
       {
          msg( LOG_CRIT, func, "no services. Exiting..." ) ;
+         if ( pid_file_option ) {
+            unlink(pid_file_option);
+         }
          exit( 1 ) ;
       }
    }
diff -ur xinetd-2.3.3.orig/xinetd/main.c xinetd-2.3.3/xinetd/main.c
--- xinetd-2.3.3.orig/xinetd/main.c	Sun Aug 19 04:32:31 2001
+++ xinetd-2.3.3/xinetd/main.c	Thu Aug 30 02:35:43 2001
@@ -254,7 +254,7 @@
          svc_deactivate( SP( pset_pointer( SERVICES( ps ), u ) ) ) ;
    }
 
-   if( pid_file_option ) {
+   if ( pid_file_option ) {
       unlink(pid_file_option);
    }
 
