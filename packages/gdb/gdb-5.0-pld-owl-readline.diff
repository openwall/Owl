--- gdb-5.0/gdb/gdbserver/Makefile.in.orig	Sun Feb 13 01:06:58 2000
+++ gdb-5.0/gdb/gdbserver/Makefile.in	Thu Feb 19 23:28:07 2004
@@ -87,7 +87,7 @@
 
 # Where is the source dir for the READLINE library?  Traditionally in .. or .
 # (For the binary library built from it, we use ${READLINE_DIR}${subdir}.)
-READLINE_DIR = ${srcdir}/../readline
+READLINE_DIR = /usr/lib
 READLINE_DEP = $$(READLINE_DIR)
 
 # All the includes used for CFLAGS and for lint.
--- gdb-5.0/gdb/tui/Makefile.in.orig	Tue Apr 18 08:04:57 2000
+++ gdb-5.0/gdb/tui/Makefile.in	Thu Feb 19 23:28:07 2004
@@ -49,9 +49,9 @@
 BFD_CFLAGS = -I$(BFD_DIR) -I$(BFD_SRC)
 
 # Where is the READLINE library?  Typically in ../readline.
-READLINE_DIR = ../../readline
-READLINE_SRC = $(srcdir)/$(READLINE_DIR)
-READLINE_CFLAGS = -I$(READLINE_SRC)
+READLINE_DIR = /usr/lib
+READLINE_SRC = /usr/lib
+READLINE_CFLAGS = -I/usr/include/readline
 
 # Where is the INTL library?  Typically in ../intl.
 INTL_DIR = ../../intl
--- gdb-5.0/gdb/Makefile.in.orig	Thu May 18 04:44:54 2000
+++ gdb-5.0/gdb/Makefile.in	Thu Feb 19 23:28:07 2004
@@ -126,10 +126,10 @@
 BFD_CFLAGS = -I$(BFD_DIR) -I$(BFD_SRC)
 
 # Where is the READLINE library?  Typically in ../readline.
-READLINE_DIR = ../readline
-READLINE = $(READLINE_DIR)/libreadline.a
-READLINE_SRC = $(srcdir)/$(READLINE_DIR)
-READLINE_CFLAGS = -I$(READLINE_SRC)/..
+READLINE_DIR = /usr/include/readline
+READLINE = -lreadline
+READLINE_SRC = /usr/include/readline
+READLINE_CFLAGS = -I/usr/include/readline
 
 WARN_CFLAGS = @WARN_CFLAGS@
 WERROR_CFLAGS = @WERROR_CFLAGS@
--- gdb-5.0/gdb/defs.h.orig	Mon May  1 05:45:32 2000
+++ gdb-5.0/gdb/defs.h	Thu Feb 19 23:23:35 2004
@@ -601,10 +601,6 @@
 				 struct frame_info *frame, int regnum,
 				 enum lval_type *lval);
 
-/* From readline (but not in any readline .h files).  */
-
-extern char *tilde_expand (char *);
-
 /* Control types for commands */
 
 enum misc_command_type
--- gdb-5.0/gdb/event-top.c.orig	Thu Mar 30 18:54:28 2000
+++ gdb-5.0/gdb/event-top.c	Thu Feb 19 23:28:07 2004
@@ -32,6 +32,7 @@
 #include "gdbcmd.h"
 
 /* readline include files */
+#define savestring
 #include <readline/readline.h>
 #include <readline/history.h>
 
--- gdb-5.0/gdb/top.c.orig	Wed Apr 12 16:46:03 2000
+++ gdb-5.0/gdb/top.c	Thu Feb 19 23:28:07 2004
@@ -36,6 +36,7 @@
 #include "version.h"
 
 /* readline include files */
+#define savestring
 #include <readline/readline.h>
 #include <readline/history.h>
 
--- gdb-5.0/gdb/tracepoint.c.orig	Tue Dec 14 01:05:38 1999
+++ gdb-5.0/gdb/tracepoint.c	Thu Feb 19 23:28:07 2004
@@ -36,6 +36,7 @@
 #include "ax-gdb.h"
 
 /* readline include files */
+#define savestring
 #include <readline/readline.h>
 #include <readline/history.h>
 
--- gdb-5.0/gdb/utils.c.orig	Fri Apr 21 04:10:46 2000
+++ gdb-5.0/gdb/utils.c	Thu Feb 19 23:28:07 2004
@@ -50,6 +50,7 @@
 #include "language.h"
 #include "annotate.h"
 
+#define savestring
 #include <readline/readline.h>
 
 #undef XMALLOC
--- gdb-5.0/Makefile.in.orig	Thu May 18 05:00:23 2000
+++ gdb-5.0/Makefile.in	Thu Feb 19 23:28:07 2004
@@ -558,7 +558,6 @@
 	all-perl \
 	all-prms \
 	all-rcs \
-	all-readline \
 	all-release \
 	all-recode \
 	all-sed \
@@ -631,7 +630,6 @@
 	check-perl \
 	check-prms \
 	check-rcs \
-	check-readline \
 	check-recode \
 	check-sed \
 	check-send-pr \
@@ -705,7 +703,6 @@
 	install-perl \
 	install-prms \
 	install-rcs \
-	install-readline \
 	install-recode \
 	install-sed \
 	install-send-pr \
@@ -869,7 +866,6 @@
 	clean-perl \
 	clean-prms \
 	clean-rcs \
-	clean-readline \
 	clean-release \
 	clean-recode \
 	clean-sed \
@@ -1561,7 +1557,7 @@
 all-gcc: all-bison all-byacc all-binutils all-gas all-ld
 all-bootstrap: all-libiberty all-bison all-byacc all-binutils all-gas all-ld
 GDB_TK = all-tk all-tcl all-itcl all-tix all-libgui
-all-gdb: all-libiberty all-opcodes all-bfd all-mmalloc all-readline all-bison all-byacc all-sim $(gdbnlmrequirements) $(GDB_TK)
+all-gdb: all-libiberty all-opcodes all-bfd all-mmalloc all-bison all-byacc all-sim $(gdbnlmrequirements) $(GDB_TK)
 all-gettext:
 all-gnuserv:
 configure-target-gperf: $(ALL_GCC)
@@ -1606,12 +1602,11 @@
 all-perl:
 all-prms: all-libiberty
 all-rcs:
-all-readline:
 all-recode: all-libiberty
 all-sed: all-libiberty
 all-send-pr: all-prms
 all-shellutils:
-all-sim: all-libiberty all-bfd all-opcodes all-readline
+all-sim: all-libiberty all-bfd all-opcodes
 all-tar: all-libiberty
 all-tcl:
 all-tcl8.1:
@@ -1853,7 +1848,7 @@
 		SUPPORT_FILES="$(GNATS_SUPPORT_DIRS)"
 
 .PHONY: gdb.tar.bz2
-GDB_SUPPORT_DIRS= bfd include libiberty mmalloc opcodes readline sim utils intl
+GDB_SUPPORT_DIRS= bfd include libiberty mmalloc opcodes sim utils intl
 gdb.tar.bz2: $(DIST_SUPPORT) $(GDB_SUPPORT_DIRS) gdb
 	$(MAKE) -f Makefile.in gdb-taz TOOL=gdb \
 		MD5PROG="$(MD5PROG)" \
