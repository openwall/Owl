--- dialog-0.9b-20020814/samples/copifuncs/copi.funcs.orig	Wed Jan 15 01:43:23 2003
+++ dialog-0.9b-20020814/samples/copifuncs/copi.funcs	Wed Jan 15 01:49:23 2003
@@ -31,7 +31,8 @@
 PNTSETUP=$COMEONDIR/point/.pntsetup
 
 mkstemp() {
-  eval 'tmp_'$1'=`tempfile 2>/dev/null` || tmp_'$1'=/tmp/'$1'$$'
+  eval 'tmp_'$1'=`mktemp -t copi-XXXXXX` || exit 1'
+  eval 'tempfiles[${#tempfiles[@]}]=$tmp_'$1
 }
 
 # Args: [start_uid]
--- dialog-0.9b-20020814/samples/copifuncs/copi.sendifm1.orig	Thu Jan 16 01:25:36 2003
+++ dialog-0.9b-20020814/samples/copifuncs/copi.sendifm1	Thu Jan 16 01:26:49 2003
@@ -20,7 +20,7 @@
 cd ${BATCH}
 
 ##  Anyone else there?
-trap 'rm -f ${LOCK} ; exit 1' 1 2 3 15
+tempfiles[${#tempfiles[@]}]=${LOCK}
 shlock -p $$ -f ${LOCK} || {
     echo "${PROGNAME}: [$$] locked by [`cat ${LOCK}`]"
     exit 0
--- dialog-0.9b-20020814/samples/copismall.orig	Wed Jan 15 01:41:23 2003
+++ dialog-0.9b-20020814/samples/copismall	Wed Jan 15 01:49:35 2003
@@ -49,6 +49,10 @@
 
 #POINTVER="v1.1"		# ComeOn Point version
 
+declare -a tempfiles
+trap 'rm -f ${tempfiles[@]}' EXIT
+trap 'rm -f ${tempfiles[@]}; exit 1' HUP INT TERM
+
 reset
 
 if [ $LOGNAME != root ]
--- dialog-0.9b-20020814/samples/checklist.orig	Sat Oct 13 02:44:11 2001
+++ dialog-0.9b-20020814/samples/checklist	Wed Jan 15 01:07:00 2003
@@ -3,8 +3,11 @@
 : ${DIALOG_OK=0}
 : ${DIALOG_CANCEL=1}
 : ${DIALOG_ESC=255}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --backtitle "Red Hat Software Linux" \
 	--title "CHECKLIST BOX" \
--- dialog-0.9b-20020814/samples/checklist1.orig	Sat Mar  9 20:29:07 2002
+++ dialog-0.9b-20020814/samples/checklist1	Wed Jan 15 01:11:27 2003
@@ -3,8 +3,11 @@
 : ${DIALOG_OK=0}
 : ${DIALOG_CANCEL=1}
 : ${DIALOG_ESC=255}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --backtitle "Red Hat Software Linux" \
 	--title "CHECKLIST BOX" \
--- dialog-0.9b-20020814/samples/checklist2.orig	Sat Oct  7 18:10:00 2000
+++ dialog-0.9b-20020814/samples/checklist2	Wed Jan 15 01:07:45 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --item-help --backtitle "Red Hat Software Linux" \
 	--title "CHECKLIST BOX" \
--- dialog-0.9b-20020814/samples/checklist3.orig	Sun Apr 29 02:39:20 2001
+++ dialog-0.9b-20020814/samples/checklist3	Wed Jan 15 01:09:58 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --item-help --backtitle "Red Hat Software Linux" \
 	--title "CHECKLIST BOX" \
--- dialog-0.9b-20020814/samples/checklist4.orig	Sat Mar  9 20:13:50 2002
+++ dialog-0.9b-20020814/samples/checklist4	Wed Jan 15 01:10:26 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --help-button --item-help --backtitle "Red Hat Software Linux" \
 	--title "CHECKLIST BOX" \
--- dialog-0.9b-20020814/samples/checklist5.orig	Sat Mar  9 20:32:24 2002
+++ dialog-0.9b-20020814/samples/checklist5	Wed Jan 15 01:10:48 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --help-button --item-help --backtitle "Red Hat Software Linux" \
 	--title "CHECKLIST BOX" \
--- dialog-0.9b-20020814/samples/checklist6.orig	Wed Aug 14 01:47:47 2002
+++ dialog-0.9b-20020814/samples/checklist6	Wed Jan 15 01:11:06 2003
@@ -2,8 +2,11 @@
 # $Id: checklist6,v 1.1 2002/08/13 22:47:47 tom Exp $
 # example showing the --colors option
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --help-button --item-help --colors --backtitle "\Z1Red Hat\Zn Software Linux" \
 	--title "CHECKLIST BOX" \
--- dialog-0.9b-20020814/samples/inputbox.orig	Tue Apr 24 22:10:03 2001
+++ dialog-0.9b-20020814/samples/inputbox	Wed Jan 15 01:11:56 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --title "INPUT BOX" --clear \
         --inputbox "Hi, this is an input dialog box. You can use \n
--- dialog-0.9b-20020814/samples/inputbox1.orig	Tue Apr 24 22:10:03 2001
+++ dialog-0.9b-20020814/samples/inputbox1	Wed Jan 15 01:12:11 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --cr-wrap \
 	--title "INPUT BOX" --clear \
--- dialog-0.9b-20020814/samples/inputbox2.orig	Tue Apr 24 22:10:03 2001
+++ dialog-0.9b-20020814/samples/inputbox2	Wed Jan 15 01:12:32 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --title "INPUT BOX" --clear \
         --inputbox "Hi, this is an input dialog box. You can use \n
--- dialog-0.9b-20020814/samples/inputbox3.orig	Mon Feb 21 21:06:31 2000
+++ dialog-0.9b-20020814/samples/inputbox3	Wed Jan 15 01:12:48 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --nocancel \
 	--title "INPUT BOX" --clear \
--- dialog-0.9b-20020814/samples/inputbox5.orig	Sun Aug 11 22:53:27 2002
+++ dialog-0.9b-20020814/samples/inputbox5	Wed Jan 15 01:13:14 2003
@@ -2,8 +2,11 @@
 # $Id: inputbox5,v 1.1 2002/08/11 19:53:27 tom Exp $
 # use --output-fd to write to a different output than stderr
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --title "INPUT BOX" --clear --output-fd 4 \
         --inputbox "Hi, this is an input dialog box. You can use \n
--- dialog-0.9b-20020814/samples/menubox.orig	Sun Dec 26 04:39:54 1999
+++ dialog-0.9b-20020814/samples/menubox	Wed Jan 15 01:13:26 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --clear --title "MENU BOX" \
         --menu "Hi, this is a menu box. You can use this to \n\
--- dialog-0.9b-20020814/samples/menubox1.orig	Tue Feb 22 13:32:58 2000
+++ dialog-0.9b-20020814/samples/menubox1	Wed Jan 15 01:13:49 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --default-item "OS/2" --clear --title "MENU BOX" \
         --menu "Hi, this is a menu box. You can use this to \n\
--- dialog-0.9b-20020814/samples/menubox2.orig	Tue Feb 22 13:43:08 2000
+++ dialog-0.9b-20020814/samples/menubox2	Wed Jan 15 01:14:43 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --default-item "MSDOS" --clear --title "MENU BOX" \
         --menu "Hi, this is a menu box. You can use this to \n\
--- dialog-0.9b-20020814/samples/menubox3.orig	Sat Oct  7 15:40:02 2000
+++ dialog-0.9b-20020814/samples/menubox3	Wed Jan 15 01:14:56 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --clear --item-help --title "MENU BOX" \
         --menu "Hi, this is a menu box. You can use this to \n\
--- dialog-0.9b-20020814/samples/menubox4.orig	Sun Apr 29 03:30:18 2001
+++ dialog-0.9b-20020814/samples/menubox4	Wed Jan 15 01:15:07 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --clear --item-help --title "MENU BOX" \
         --menu "Hi, this is a menu box. You can use this to \n\
--- dialog-0.9b-20020814/samples/menubox5.orig	Sat Mar  9 19:42:54 2002
+++ dialog-0.9b-20020814/samples/menubox5	Wed Jan 15 01:15:21 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --clear --help-button --item-help --title "MENU BOX" \
         --menu "Hi, this is a menu box. You can use this to \n\
--- dialog-0.9b-20020814/samples/menubox6.orig	Wed Aug 14 01:32:53 2002
+++ dialog-0.9b-20020814/samples/menubox6	Wed Jan 15 01:15:37 2003
@@ -2,8 +2,11 @@
 # $Id: menubox6,v 1.1 2002/08/13 22:32:53 tom Exp $
 # example showing the --colors option
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --clear --item-help --title "MENU BOX" --colors \
         --menu "Hi, this is a \Zumenu\Zn box. You can use this to \n\
--- dialog-0.9b-20020814/samples/menubox7.orig	Wed Aug 14 02:53:37 2002
+++ dialog-0.9b-20020814/samples/menubox7	Wed Jan 15 01:15:47 2003
@@ -2,8 +2,11 @@
 # $Id: menubox7,v 1.1 2002/08/13 23:53:37 tom Exp $
 # example with --extra-button
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --clear --item-help --extra-button --extra-label "Choice" \
 	--title "MENU BOX" \
--- dialog-0.9b-20020814/samples/password.orig	Mon Nov 12 01:47:24 2001
+++ dialog-0.9b-20020814/samples/password	Wed Jan 15 01:18:31 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --title "INPUT BOX" --clear \
         --passwordbox "Hi, this is an password dialog box. You can use \n
--- dialog-0.9b-20020814/samples/radiolist.orig	Mon Feb 21 21:51:52 2000
+++ dialog-0.9b-20020814/samples/radiolist	Wed Jan 15 01:19:41 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --backtitle "Red Hat Software Linux" \
 	--title "RADIOLIST BOX" --clear \
--- dialog-0.9b-20020814/samples/radiolist2.orig	Mon Dec  3 00:36:28 2001
+++ dialog-0.9b-20020814/samples/radiolist2	Wed Jan 15 01:19:53 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --ok-label Okay \
 	--cancel-label 'Give Up' \
--- dialog-0.9b-20020814/samples/radiolist3.orig	Sat Mar  9 20:11:27 2002
+++ dialog-0.9b-20020814/samples/radiolist3	Wed Jan 15 01:20:05 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --item-help --ok-label Okay \
 	--cancel-label 'Give Up' \
--- dialog-0.9b-20020814/samples/radiolist4.orig	Sat Mar  9 20:13:22 2002
+++ dialog-0.9b-20020814/samples/radiolist4	Wed Jan 15 01:20:21 2003
@@ -1,7 +1,10 @@
 #! /bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 $DIALOG --help-button --help-label "Hints" --item-help --ok-label Okay \
 	--cancel-label 'Give Up' \
--- dialog-0.9b-20020814/samples/tailboxbg.orig	Sat Aug 11 20:24:36 2001
+++ dialog-0.9b-20020814/samples/tailboxbg	Wed Jan 15 01:20:31 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 ./killall listing
 ./listing >listing.out &
--- dialog-0.9b-20020814/samples/tailboxbg1.orig	Sat Aug 11 20:24:33 2001
+++ dialog-0.9b-20020814/samples/tailboxbg1	Wed Jan 15 01:20:43 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 ./killall listing
 ./listing >listing.out &
--- dialog-0.9b-20020814/samples/tailboxbg2.orig	Sat Aug 11 20:24:31 2001
+++ dialog-0.9b-20020814/samples/tailboxbg2	Wed Jan 15 01:20:52 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 ./killall listing
 ./listing >listing.out &
--- dialog-0.9b-20020814/samples/textbox.orig	Sun Jan 16 03:17:01 2000
+++ dialog-0.9b-20020814/samples/textbox	Wed Jan 15 01:21:02 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 cat << EOF > $tempfile
 Hi, this is a text dialog box. It can be used to display text from a file.
--- dialog-0.9b-20020814/samples/textbox2.orig	Sun Jul 30 20:56:31 2000
+++ dialog-0.9b-20020814/samples/textbox2	Wed Jan 15 01:21:12 2003
@@ -1,7 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
-trap "rm -f $tempfile" 0 1 2 5 15
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 cat << EOF > $tempfile
 Hi, this is a text dialog box. It can be used to display text from a file.
--- dialog-0.9b-20020814/samples/wheel.orig	Mon Jan 15 23:29:51 2001
+++ dialog-0.9b-20020814/samples/wheel	Wed Jan 15 01:21:20 2003
@@ -1,6 +1,10 @@
 #!/bin/sh
 DIALOG=${DIALOG=dialog}
-tempfile=`tempfile 2>/dev/null` || tempfile=/tmp/test$$
+
+tempfile=
+trap 'rm -f $tempfile' EXIT
+trap 'rm -f $tempfile; exit 1' HUP INT TERM
+tempfile=`mktemp -t dialog-samples.XXXXXX` || exit 1
 
 TITLE="This screen was taken from ComeOn Point Installer! v0.9 by ComeOn Linux!"
 
