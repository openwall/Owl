diff -urN glibc-2.1.3.orig/nis/yp_xdr.c glibc-2.1.3.rh/nis/yp_xdr.c
--- glibc-2.1.3.orig/nis/yp_xdr.c	Wed Aug 19 02:25:46 1998
+++ glibc-2.1.3.rh/nis/yp_xdr.c	Mon Dec 27 18:16:07 1999
@@ -28,6 +28,7 @@
  */
 
 #include <rpcsvc/yp.h>
+#include <rpcsvc/ypclnt.h>
 
 bool_t
 xdr_ypstat (XDR *xdrs, ypstat *objp)
@@ -297,4 +298,48 @@
   if (!xdr_u_int (xdrs, &objp->ypsetdom_vers))
     return FALSE;
   return TRUE;
+}
+
+bool_t
+xdr_ypall(XDR *xdrs, struct ypall_callback *incallback)
+{
+    struct ypresp_key_val out;
+    char key[YPMAXRECORD], val[YPMAXRECORD];
+
+    /*
+     * Set up key/val struct to be used during the transaction.
+     */
+    memset(&out, 0, sizeof out);
+    out.key.keydat_val = key;
+    out.key.keydat_len = sizeof(key);
+    out.val.valdat_val = val;
+    out.val.valdat_len = sizeof(val);
+
+    for (;;) {
+	bool_t more, status;
+
+	/* Values pending? */
+	if (!xdr_bool(xdrs, &more))
+	    return FALSE;           /* can't tell! */
+	if (!more)
+	    return TRUE;            /* no more */
+
+	/* Transfer key/value pair. */
+	status = xdr_ypresp_key_val(xdrs, &out);
+
+	/*
+	 * If we succeeded, call the callback function.
+	 * The callback will return TRUE when it wants
+	 * no more values.  If we fail, indicate the
+	 * error.
+	 */
+	if (status) {
+	    if ((*incallback->foreach)(out.stat,
+				       (char *)out.key.keydat_val, out.key.keydat_len,
+				       (char *)out.val.valdat_val, out.val.valdat_len,
+				       incallback->data))
+		return TRUE;
+	} else
+	    return FALSE;
+    }
 }
diff -urN glibc-2.1.3.orig/nis/Versions glibc-2.1.3.rh/nis/Versions
--- glibc-2.1.3.orig/nis/Versions	Tue Jul 28 16:50:25 1998
+++ glibc-2.1.3.rh/nis/Versions	Mon Dec 27 18:16:06 1999
@@ -54,6 +54,9 @@
     __nisbind_destroy;    __nisbind_next;
     readColdStartFile;    writeColdStartFile;
   }
+  GLIBC_2.1.2 {
+    xdr_ypall;
+  }
 }
 
 libnss_compat {
diff -urN glibc-2.1.3.orig/Versions.def glibc-2.1.3.rh/Versions.def
--- glibc-2.1.3.orig/Versions.def	Tue Nov 16 02:24:57 1999
+++ glibc-2.1.3.rh/Versions.def	Mon Dec 27 18:16:06 1999
@@ -31,6 +31,7 @@
 libnsl {
   GLIBC_2.0
   GLIBC_2.1 GLIBC_2.0
+  GLIBC_2.1.2 GLIBC_2.1
 }
 libnss_compat {
   GLIBC_2.0
