--- e2fsprogs-1.18/lib/et/et_c.awk.jj	Sat Jun 27 07:23:50 1998
+++ e2fsprogs-1.18/lib/et/et_c.awk	Wed Feb  2 16:47:48 2000
@@ -117,12 +117,31 @@ c2n["_"]=63
 	print " * This file is automatically generated; please do not edit it." > outfile
 	print " */" > outfile
 
+	print "#if defined(__STDC__) || defined(_MSDOS) || defined(_WIN32)" > outfile
+	print "#define NOARGS void" > outfile
+	print "#else" > outfile
+	print "#define NOARGS" > outfile
+	print "#define const" > outfile
+	print "#endif" > outfile
 	print "" > outfile
 	print "static const char * const text[] = {" > outfile
 	table_item_count = 0
 }
 
+(continuation == 1) && ($0 ~ /\\[ \t]*$/) {
+	text=substr($0,1,length($0)-1);
+#	printf "\t\t\"%s\"\n", text > outfile
+	cont_buf=cont_buf text;
+}
+
+(continuation == 1) && ($0 ~ /"[ \t]*$/) {
+#	printf "\t\t\"%s,\n", $0 > outfile
+	printf "\t%s,\n", cont_buf $0 > outfile
+	continuation = 0;
+}
+
 /^[ \t]*(error_code|ec)[ \t]+[A-Z_0-9]+,[ \t]*$/ {
+	table_item_count++
 	skipone=1
 	next
 }
@@ -137,10 +156,30 @@ c2n["_"]=63
 	table_item_count++
 }
 
+/^[ \t]*(error_code|ec)[ \t]+[A-Z_0-9]+,[ \t]*".*\\[ \t]*$/ {
+	text=""
+	for (i=3; i<=NF; i++) { 
+	    text = text FS $i
+	}
+	text=substr(text,2,length(text)-2);
+#	printf "\t%s\"\n", text > outfile
+	cont_buf=text
+	continuation++;
+}
+
+/^[ \t]*".*\\[ \t]*$/ {
+	if (skipone) {
+	    text=substr($0,1,length($0)-1);
+#	    printf "\t%s\"\n", text > outfile
+	    cont_buf=text
+	    continuation++;
+	}
+	skipone=0
+}
+
 { 
 	if (skipone) {
 	    printf "\t%s,\n", $0 > outfile
-	    table_item_count++
 	}
 	skipone=0
 }
@@ -173,9 +212,9 @@ END {
 	print "" > outfile
 	print "static struct et_list link = { 0, 0 };" > outfile
 	print "" > outfile
-	print "void initialize_" table_name "_error_table(void);" > outfile
+	print "void initialize_" table_name "_error_table(NOARGS);" > outfile
 	print "" > outfile
-	print "void initialize_" table_name "_error_table(void) {" > outfile
+	print "void initialize_" table_name "_error_table (NOARGS) {" > outfile
 	print "    if (!link.table) {" > outfile
 	print "        link.next = _et_list;" > outfile
 	print "        link.table = &et;" > outfile
