diff -urp e2fsprogs-1.37.orig/debugfs/debugfs.c e2fsprogs-1.37/debugfs/debugfs.c
--- e2fsprogs-1.37.orig/debugfs/debugfs.c	Mon Mar 21 14:27:12 2005
+++ e2fsprogs-1.37/debugfs/debugfs.c	Fri Mar 25 16:12:15 2005
@@ -429,7 +429,6 @@ void internal_dump_inode_extra(FILE *out
 	__u32 *magic;
 	char *start, *end;
 	int storage_size;
-	int i;
 
 	fprintf(out, "Size of extra inode fields: %d\n", inode->i_extra_isize);
 	if (inode->i_extra_isize > EXT2_INODE_SIZE(current_fs->super) -
diff -urp e2fsprogs-1.37.orig/debugfs/debugfs.h e2fsprogs-1.37/debugfs/debugfs.h
--- e2fsprogs-1.37.orig/debugfs/debugfs.h	Mon Mar 21 03:31:41 2005
+++ e2fsprogs-1.37/debugfs/debugfs.h	Fri Mar 25 16:13:35 2005
@@ -43,6 +43,8 @@ extern int common_block_args_process(int
 				     blk_t *block, int *count);
 extern int debugfs_read_inode(ext2_ino_t ino, struct ext2_inode * inode,
 			      const char *cmd);
+extern int debugfs_read_inode_full(ext2_ino_t ino, struct ext2_inode * inode,
+			      const char *cmd, int bufsize);
 extern int debugfs_write_inode(ext2_ino_t ino, struct ext2_inode * inode,
 			       const char *cmd);
 extern int debugfs_write_new_inode(ext2_ino_t ino, struct ext2_inode * inode,
diff -urp e2fsprogs-1.37.orig/debugfs/set_fields.c e2fsprogs-1.37/debugfs/set_fields.c
--- e2fsprogs-1.37.orig/debugfs/set_fields.c	Fri Feb  4 01:38:52 2005
+++ e2fsprogs-1.37/debugfs/set_fields.c	Fri Mar 25 14:54:45 2005
@@ -10,6 +10,7 @@
  */
 
 #define _XOPEN_SOURCE 500 /* for inclusion of strptime() */
+#define _BSD_SOURCE /* for inclusion of strcasecmp() */
 
 #include <stdio.h>
 #include <unistd.h>
diff -urp e2fsprogs-1.37.orig/e2fsck/e2fsck.h e2fsprogs-1.37/e2fsck/e2fsck.h
--- e2fsprogs-1.37.orig/e2fsck/e2fsck.h	Fri Dec 24 06:42:22 2004
+++ e2fsprogs-1.37/e2fsck/e2fsck.h	Fri Mar 25 16:10:22 2005
@@ -456,6 +456,9 @@ extern void e2fsck_read_inode(e2fsck_t c
 			      struct ext2_inode * inode, const char * proc);
 extern void e2fsck_write_inode(e2fsck_t ctx, unsigned long ino,
 			       struct ext2_inode * inode, const char * proc);
+extern void e2fsck_write_inode_full(e2fsck_t ctx, unsigned long ino,
+			       struct ext2_inode * inode, int bufsize,
+			       const char *proc);
 #ifdef MTRACE
 extern void mtrace_print(char *mesg);
 #endif
diff -urp e2fsprogs-1.37.orig/e2fsck/pass1.c e2fsprogs-1.37/e2fsck/pass1.c
--- e2fsprogs-1.37.orig/e2fsck/pass1.c	Mon Mar 21 22:31:21 2005
+++ e2fsprogs-1.37/e2fsck/pass1.c	Fri Mar 25 16:11:16 2005
@@ -246,7 +246,7 @@ static void check_ea_in_inode(e2fsck_t c
 	struct ext2_super_block *sb = ctx->fs->super;
 	struct ext2_inode_large *inode;
 	struct ext2_ext_attr_entry *entry;
-	char *start, *end, *name;
+	char *start, *end;
 	int storage_size, remain, offs;
 	int problem = 0;
 
@@ -863,7 +863,6 @@ void e2fsck_pass1(e2fsck_t ctx)
 
 	if (ctx->flags & E2F_FLAG_RESIZE_INODE) {
 		ext2fs_block_bitmap save_bmap;
-		errcode_t retval;
 
 		save_bmap = fs->block_map;
 		fs->block_map = ctx->block_found_map;
diff -urp e2fsprogs-1.37.orig/lib/blkid/probe.c e2fsprogs-1.37/lib/blkid/probe.c
--- e2fsprogs-1.37.orig/lib/blkid/probe.c	Fri Jan 28 00:46:50 2005
+++ e2fsprogs-1.37/lib/blkid/probe.c	Mon Feb 28 20:43:59 2005
@@ -127,7 +127,6 @@ static int probe_ext2(int fd __BLKID_ATT
 		      struct blkid_magic *id, unsigned char *buf)
 {
 	struct ext2_super_block *es;
-	const char *sec_type = 0, *label = 0;
 
 	es = (struct ext2_super_block *)buf;
 
@@ -321,7 +320,6 @@ static int probe_swap1(int fd,
 		       unsigned char *buf __BLKID_ATTR((unused)))
 {
 	struct swap_id_block *sws;
-	const char *label = 0;
 
 	probe_swap0(fd, cache, dev, id, buf);
 	/*
diff -urp e2fsprogs-1.37.orig/lib/e2p/ls.c e2fsprogs-1.37/lib/e2p/ls.c
--- e2fsprogs-1.37.orig/lib/e2p/ls.c	Sat Mar 19 20:59:40 2005
+++ e2fsprogs-1.37/lib/e2p/ls.c	Fri Mar 25 15:43:39 2005
@@ -12,6 +12,7 @@
  */
 
 #include <stdio.h>
+#include <stdlib.h>
 #include <sys/types.h>
 #include <string.h>
 #include <grp.h>
diff -urp e2fsprogs-1.37.orig/lib/ext2fs/ind_block.c e2fsprogs-1.37/lib/ext2fs/ind_block.c
--- e2fsprogs-1.37.orig/lib/ext2fs/ind_block.c	Thu Jan  6 04:15:49 2005
+++ e2fsprogs-1.37/lib/ext2fs/ind_block.c	Mon Feb 28 20:43:59 2005
@@ -32,7 +32,7 @@ errcode_t ext2fs_read_ind_block(ext2_fil
 	else {
 		retval = io_channel_read_blk(fs->io, blk, 1, buf);
 		if (retval)
-			retval;
+			return retval;
 	}
 #ifdef EXT2FS_ENABLE_SWAPFS
 	if (fs->flags & (EXT2_FLAG_SWAP_BYTES | EXT2_FLAG_SWAP_BYTES_READ)) {
diff -urp e2fsprogs-1.37.orig/lib/ext2fs/inode.c e2fsprogs-1.37/lib/ext2fs/inode.c
--- e2fsprogs-1.37.orig/lib/ext2fs/inode.c	Mon Mar 21 06:10:13 2005
+++ e2fsprogs-1.37/lib/ext2fs/inode.c	Fri Mar 25 15:45:08 2005
@@ -724,7 +724,6 @@ errcode_t ext2fs_write_new_inode(ext2_fi
 				 struct ext2_inode *inode)
 {
 	struct ext2_inode	*buf;
-	errcode_t		retval;
 	int 			size = EXT2_INODE_SIZE(fs->super);
 	struct ext2_inode_large	*large_inode;
 
@@ -743,7 +742,7 @@ errcode_t ext2fs_write_new_inode(ext2_fi
 	large_inode->i_extra_isize = sizeof(struct ext2_inode_large) - 
 		EXT2_GOOD_OLD_INODE_SIZE;
 
-	retval = ext2fs_write_inode_full(fs, ino, buf, size);
+	return ext2fs_write_inode_full(fs, ino, buf, size);
 }
 
  
diff -urp e2fsprogs-1.37.orig/misc/e2image.c e2fsprogs-1.37/misc/e2image.c
--- e2fsprogs-1.37.orig/misc/e2image.c	Wed Jan 26 16:37:46 2005
+++ e2fsprogs-1.37/misc/e2image.c	Mon Feb 28 20:43:59 2005
@@ -357,7 +357,7 @@ static void scramble_dir_block(ext2_fils
 		if (rec_len < 8 || (rec_len % 4) ||
 		    (p+rec_len > end)) {
 			printf("Corrupt directory block %lu: "
-			       "bad rec_len (%d)\n", blk, rec_len);
+			       "bad rec_len (%d)\n", (unsigned long)blk, rec_len);
 			rec_len = end - p;
 #ifdef EXT2FS_ENABLE_SWAPFS
 			if (fs->flags & EXT2_FLAG_SWAP_BYTES) 
@@ -367,7 +367,7 @@ static void scramble_dir_block(ext2_fils
 		}
 		if (dirent->name_len + 8 > rec_len) {
 			printf("Corrupt directory block %lu: "
-			       "bad name_len (%d)\n", blk, dirent->name_len);
+			       "bad name_len (%d)\n", (unsigned long)blk, dirent->name_len);
 			dirent->name_len = rec_len - 8;
 			continue;
 		}
diff -urp e2fsprogs-1.37.orig/resize/resize2fs.c e2fsprogs-1.37/resize/resize2fs.c
--- e2fsprogs-1.37.orig/resize/resize2fs.c	Wed Jan 26 15:03:55 2005
+++ e2fsprogs-1.37/resize/resize2fs.c	Mon Feb 28 20:43:59 2005
@@ -480,10 +480,8 @@ static errcode_t mark_table_blocks(ext2_
 	blk_t			block, b;
 	unsigned int		j;
 	dgrp_t			i;
-	unsigned long		meta_bg, meta_bg_size;
-	int			has_super;
+	unsigned long		meta_bg_size;
 	unsigned int		old_desc_blocks;
-	errcode_t		retval;
 
 	meta_bg_size = (fs->blocksize / sizeof (struct ext2_group_desc));
 	block = fs->super->s_first_data_block;
