# $Id: Owl/packages/findutils/findutils.spec,v 1.3 2002/02/01 15:28:39 solar Exp $

Summary: The GNU versions of find utilities (find and xargs).
Name: findutils
Version: 4.1.5
Release: owl4
Epoch: 1
License: GPL
Group: Applications/File
Source0: ftp://alpha.gnu.org/gnu/%{name}-%{version}.tar.gz
Patch0: findutils-4.1.5-rh-fixfind.diff
Patch1: findutils-4.1.5-owl-delete.diff
PreReq: /sbin/install-info
BuildRoot: /override/%{name}-%{version}

%description
The findutils package contains programs which will help you locate
files on your system.  The find utility searches through a hierarchy
of directories looking for files which match a certain set of criteria
(such as a filename pattern).  The xargs utility builds and executes
command lines from standard input arguments (usually lists of file
names generated by the find command).

%prep
%setup -q
%patch0 -p1
%patch1 -p1

%{expand:%%define optflags %optflags -Wall -D_GNU_SOURCE}

%build
%configure
make

%install
rm -rf $RPM_BUILD_ROOT
%makeinstall

%post
/sbin/install-info %{_infodir}/find.info.gz %{_infodir}/dir

%preun
if [ $1 -eq 0 ]; then
	/sbin/install-info --delete %{_infodir}/find.info.gz %{_infodir}/dir
fi

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%doc NEWS README
%{_bindir}/find
%{_bindir}/xargs
%{_mandir}/man1/find.1*
%{_mandir}/man1/xargs.1*
%{_infodir}/find.info*

%changelog
* Fri Feb 01 2002 Solar Designer <solar@owl.openwall.com>
- Build with -Wall; this produces very few warnings which should be
dealt with at next update.

* Fri Feb 01 2002 Michail Litvak <mci@owl.openwall.com>
- Enforce our new spec file conventions.

* Sat Sep 23 2000 Alexandr D. Kanevskiy <kad@owl.openwall.com>
- import spec from RH
- import "-delete" patch by Douglas Siebert <douglas-siebert@uiowa.edu>
