#!/bin/sh
# $Id: Owl/packages/owl-cdrom/rc.ramdisk,v 1.2 2001/07/27 20:49:03 solar Exp $

echo "Setting up a RAM disk"

/sbin/mke2fs -q -b 1024 -m 0 /dev/ram0
mount -n /dev/ram0 /ram

tar cf - -C /rom \
    --exclude ./var/lib \
    --exclude ./etc/termcap \
    . |
	tar xf - -C /ram

ln -s /rom/var/lib /ram/var/
ln -s /rom/etc/termcap /ram/etc/

sed 's,^,/ram/dev/,' < /rom/etc/securetty > /ram/etc/securetty

# Enter /ram into mtab.
> /etc/mtab
mount -f /dev/ram0 /ram
