--- db-4.2.52/dist/aclocal_java/ac_prog_java.ac.gcj	2003-05-10 13:46:09.000000000 -0400
+++ db-4.2.52/dist/aclocal_java/ac_prog_java.ac	2004-06-07 14:44:10.025613309 -0400
@@ -73,7 +73,10 @@
 else
         test x$JAVA = x && AC_CHECK_PROGS(JAVA, java$EXEEXT kaffe$EXEEXT, $JAVAPREFIX)
 fi
-test x$JAVA = x && AC_MSG_ERROR([no acceptable Java virtual machine found in \$PATH])
-AC_PROG_JAVA_WORKS
+if test x$JAVA = x; then
+	AC_MSG_WARN([no acceptable Java virtual machine found in \$PATH])
+else
+	AC_PROG_JAVA_WORKS
+fi
 AC_PROVIDE([$0])dnl
 ])
--- db-4.2.52/dist/aclocal_java/ac_prog_javac.ac.gcj	2004-06-07 14:48:36.651984980 -0400
+++ db-4.2.52/dist/aclocal_java/ac_prog_javac.ac	2004-06-07 14:50:20.170648093 -0400
@@ -33,9 +33,9 @@
 AC_DEFUN([AC_PROG_JAVAC],[
 AC_REQUIRE([AC_EXEEXT])dnl
 if test "x$JAVAPREFIX" = x; then
-        test "x$JAVAC" = x && AC_CHECK_PROGS(JAVAC, javac$EXEEXT "gcj$EXEEXT -C" guavac$EXEEXT jikes$EXEEXT)
+        test "x$JAVAC" = x && AC_CHECK_PROGS(JAVAC, javac$EXEEXT "gcj34$EXEEXT -C" "gcj-ssa$EXEEXT -C" "gcj$EXEEXT -C" guavac$EXEEXT jikes$EXEEXT)
 else
-        test "x$JAVAC" = x && AC_CHECK_PROGS(JAVAC, javac$EXEEXT "gcj$EXEEXT -C" guavac$EXEEXT jikes$EXEEXT, $JAVAPREFIX)
+        test "x$JAVAC" = x && AC_CHECK_PROGS(JAVAC, javac$EXEEXT "gcj34$EXEEXT -C" "gcj-ssa$EXEEXT -C" "gcj$EXEEXT -C" guavac$EXEEXT jikes$EXEEXT, $JAVAPREFIX)
 fi
 test "x$JAVAC" = x && AC_MSG_ERROR([no acceptable Java compiler found in \$PATH])
 AC_PROG_JAVAC_WORKS
--- db-4.2.52/dist/configure.ac.gcj	2003-10-14 20:55:17.000000000 -0400
+++ db-4.2.52/dist/configure.ac	2004-06-07 14:44:10.026613209 -0400
@@ -390,6 +390,7 @@
 	AC_PROG_JAVA
 	AC_JNI_INCLUDE_DIR
 
+	if test x$JAVA != x; then
 	AC_MSG_CHECKING(java version)
         case "$JAVA" in
 	*kaffe* )
@@ -400,7 +401,7 @@
 	esac
 	AC_MSG_RESULT($JAVA_VERSION)
 	case "$JAVA_VERSION" in
-	1.[[3456789]]* | 1.[[1-9]][[0-9]]* | [[23456789]]* ) ;;
+	1.[[3456789]]* | 1.[[1-9]][[0-9]]* | [[23456789]]* | *libgcj* ) ;;
 	* )
 		AC_MSG_ERROR([Java version 1.3 or higher required, got $JAVA_VERSION]) ;;
 	esac
@@ -409,6 +410,7 @@
 	do
 		CPPFLAGS="$CPPFLAGS -I$JNI_INCLUDE_DIR"
 	done
+	fi
 
 	ADDITIONAL_LANG="$ADDITIONAL_LANG java"
 	INSTALL_LIBS="$INSTALL_LIBS \$(libjso_target)"
