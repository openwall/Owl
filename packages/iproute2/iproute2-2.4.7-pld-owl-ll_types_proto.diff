--- iproute2/lib/ll_types.c.orig	Mon Dec 17 15:42:23 2001
+++ iproute2/lib/ll_types.c	Mon Dec 17 15:49:07 2001
@@ -45,10 +45,13 @@
 __PF(ARCNET,arcnet)
 __PF(APPLETLK,atalk)
 __PF(DLCI,dlci)
+#ifdef ARPHRD_ATM
 __PF(ATM,atm)
+#endif
 __PF(METRICOM,metricom)
+#ifdef ARPHRD_IEEE1394
 __PF(IEEE1394,ieee1394)
-
+#endif
 __PF(SLIP,slip)
 __PF(CSLIP,cslip)
 __PF(SLIP6,slip6)
@@ -57,12 +60,18 @@
 __PF(ADAPT,adapt)
 __PF(ROSE,rose)
 __PF(X25,x25)
+#ifdef ARPHRD_HWX25
 __PF(HWX25,hwx25)
+#endif
 __PF(PPP,ppp)
 __PF(HDLC,hdlc)
 __PF(LAPB,lapb)
+#ifdef ARPHRD_DDCMP
 __PF(DDCMP,ddcmp)
+#endif
+#ifdef ARPHRD_RAWHDLC
 __PF(RAWHDLC,rawhdlc)
+#endif
 
 __PF(TUNNEL,ipip)
 __PF(TUNNEL6,tunnel6)
@@ -99,7 +108,9 @@
 #ifdef ARPHRD_IEEE802_TR
 __PF(IEEE802_TR,tr)
 #endif
+#ifdef ARPHRD_IEEE80211
 __PF(IEEE80211,ieee802.11)
+#endif
 #ifdef ARPHRD_VOID
 __PF(VOID,void)
 #endif
--- iproute2/lib/ll_proto.c.orig	Mon Dec 17 16:17:35 2001
+++ iproute2/lib/ll_proto.c	Mon Dec 17 16:21:40 2001
@@ -34,13 +34,19 @@
 } llproto_names[] = {
 __PF(LOOP,loop)
 __PF(PUP,pup)  
+#ifdef ETH_P_PUPAT
 __PF(PUPAT,pupat)     
+#endif
 __PF(IP,ip)
 __PF(X25,x25)
 __PF(ARP,arp)
 __PF(BPQ,bpq)
+#ifdef ETH_P_IEEEPUP
 __PF(IEEEPUP,ieeepup)  
+#endif
+#ifdef ETH_P_IEEEPUPAT
 __PF(IEEEPUPAT,ieeepupat)  
+#endif
 __PF(DEC,dec)       
 __PF(DNA_DL,dna_dl)    
 __PF(DNA_RC,dna_rc)    
@@ -54,8 +60,12 @@
 __PF(AARP,aarp)      
 __PF(IPX,ipx)       
 __PF(IPV6,ipv6)      
+#ifdef ETH_P_PPP_DISC
 __PF(PPP_DISC,ppp_disc)      
+#endif
+#ifdef ETH_P_PPP_SES
 __PF(PPP_SES,ppp_ses)      
+#endif
 __PF(ATMMPOA,atmmpoa)      
 __PF(ATMFATE,atmfate)      
 
@@ -73,7 +83,9 @@
 __PF(MOBITEX,mobitex)   
 __PF(CONTROL,control)   
 __PF(IRDA,irda)      
+#ifdef ETH_P_ECONET
 __PF(ECONET,econet)      
+#endif
 
 { 0x8100, "802.1Q" },
 { ETH_P_IP, "ipv4" },
