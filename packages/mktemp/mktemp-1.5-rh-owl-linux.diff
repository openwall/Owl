diff -ur mktemp-1.5.orig/Makefile mktemp-1.5/Makefile
--- mktemp-1.5.orig/Makefile	Thu Nov 21 10:59:31 1996
+++ mktemp-1.5/Makefile	Fri Jul  7 19:35:44 2000
@@ -1,5 +1,21 @@
-#	$OpenBSD: Makefile,v 1.1 1996/11/21 07:59:31 millert Exp $
+CC = gcc
+LD = gcc
+CFLAGS = -c -Wall -O2 -fomit-frame-pointer
+LDFLAGS = -s
 
-PROG=	mktemp
+FAKEROOT =
 
-.include <bsd.prog.mk>
+all: mktemp
+
+mktemp: mktemp.o
+	$(LD) $(LDFLAGS) mktemp.o -o mktemp
+
+mktemp.o: mktemp.c
+	$(CC) $(CFLAGS) mktemp.c -o mktemp.o
+
+clean:
+	rm -f mktemp *.o
+
+install:
+	install -m 755 mktemp $(FAKEROOT)/bin/mktemp
+	install -m 644 mktemp.1 $(FAKEROOT)/usr/man/man1
diff -ur mktemp-1.5.orig/mktemp.1 mktemp-1.5/mktemp.1
--- mktemp-1.5.orig/mktemp.1	Sat Aug  7 01:27:59 1999
+++ mktemp-1.5/mktemp.1	Fri Jul  7 19:32:18 2000
@@ -39,7 +39,6 @@
 .Nd make temporary file name (unique)
 .Sh SYNOPSIS
 .Nm mktemp
-.Op Fl d
 .Op Fl q
 .Op Fl u
 .Ar template
@@ -92,8 +91,6 @@
 .Sh OPTIONS
 .Bl -tag -width indent
 The available options are as follows:
-.It Fl d
-Make a directory instead of a file.
 .It Fl q
 Fail silently if an error occurs.  This is useful if
 a script does not want error output to go to standard error.
@@ -146,11 +143,9 @@
 }
 .Ed
 .Sh SEE ALSO
-.Xr mkdtemp 3 ,
 .Xr mkstemp 3 ,
 .Xr mktemp 3
 .Sh HISTORY
 The
 .Nm
-utility appeared in
-.Ox 2.1 .
+utility appeared in OpenBSD 2.1.
diff -ur mktemp-1.5.orig/mktemp.c mktemp-1.5/mktemp.c
--- mktemp-1.5.orig/mktemp.c	Tue Sep 15 03:58:37 1998
+++ mktemp-1.5/mktemp.c	Fri Jul  7 19:37:53 2000
@@ -35,14 +35,30 @@
 #include <stdlib.h>
 #include <string.h>
 #include <unistd.h>
-#include <err.h>
+#include <errno.h>
+#include <stdarg.h>
 
 extern char *__progname;
 
+void err(int somecode, char * message, ...) {
+    va_list arglist;
+
+    va_start(arglist, message);
+    vfprintf(stderr, message, arglist);
+    fprintf(stderr, "\n");
+    va_end(arglist);
+
+    exit(somecode);
+}
+
+void errx(int somecode, char * message) {
+    err(somecode, message);
+}
+
 void
 usage()
 {
-	(void) fprintf(stderr, "Usage: %s [-d] [-q] [-u] template\n",
+	(void) fprintf(stderr, "Usage: %s [-q] [-u] template\n",
 	    __progname);
 	exit(1);
 }
@@ -82,6 +98,9 @@
 	}
 
 	if (makedir) {
+		fprintf(stderr, "mktemp: -d option is not supported on Linux\n");
+		exit(1);
+#if 0
 		if (mkdtemp(template) == NULL) {
 			if (qflag)
 				exit(1);
@@ -91,6 +110,7 @@
 
 		if (uflag)
 			(void) rmdir(template);
+#endif
 	} else {
 		if (mkstemp(template) < 0) {
 			if (qflag)
